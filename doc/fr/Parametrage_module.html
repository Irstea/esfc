<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="fr-fr"><head><meta content="text/html; charset=ISO-8859-1" http-equiv="content-type"><title>Paramétrer un module</title><meta content="Eric Quinton" name="author"><link rel="stylesheet" href="../../display/CSS/proto.css" type="text/css"></head>
<body><h1>Paramétrer un module</h1>Un
module correspond à une page PHP qui va réaliser une action dans
l'application. Pour être exécuté, le module peut nécessiter des droits
particuliers, ou simplement se satisfaire d'une identification
préalable. <br>Il peut également générer un code de retour, pour enchaîner sur un autre module selon le code qui sera fourni.<br>Le module peut également être accessible directement depuis le menu de l'application.<br><h2>Le fichier de paramètres des modules</h2>Le fichier est stocké dans param/actions.xml. Il a la forme suivante :<br><pre>&lt;navigation&gt;</pre><pre>&nbsp;&nbsp;&nbsp; &lt;model action="index.php" droits="gestion" retourko="model"</pre><pre>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; retourok="model" retournull="model" droitko="model" loginrequis="1"<br>&nbsp;menulevel="0" menuorder="0" menudroits="gestion" menuloginrequis="1" menuparent="0" menutitle="0" menuvalue="0"&gt;</pre><pre>&nbsp;&nbsp;&nbsp; &lt;/model&gt;</pre><pre>&nbsp;&nbsp;&nbsp; &lt;loginliste action="identification/loginliste.php" droits="admin"<br>&nbsp;menulevel="1" menuorder="1" menudroits="admin" menuparent="3" menutitle="3" menuvalue="2"&gt;&lt;/loginliste&gt;</pre><pre>&nbsp;&nbsp;&nbsp; &lt;loginmodif action="identification/loginmodif.php" droits="admin"<br>&nbsp;retourko="loginliste" retourok="loginliste" retournull="loginliste" param1="param"&gt;&lt;/loginmodif&gt;</pre><pre>&lt;/navigation&gt;<br></pre><p>L'élément <span style="font-style: italic;">model</span> est donné à titre d'exemple, il contient tous les attributs possibles pour un module.</p><h3>La définition du module</h3><ul><li><span style="font-weight: bold;">action</span> : nom de la page php à exécuter</li><li><span style="font-weight: bold;">droits</span> : nom du droit nécessaire pour exécuter le module (cf. gestion des droits)</li><li><span style="font-weight: bold;">loginrequis</span>
: 0|1. Si aucun droit particulier n'est nécessaire, il peut être
possible de demander simplement à ce que l'utilisateur soit identifié</li><li><span style="font-weight: bold;">droitko</span> : nom du module appelé si les droits sont insuffisants</li><li><span style="font-weight: bold;">retourok</span>,
retourko,
retournull : correspond aux valeurs attribuées à la variable
$module_coderetour, qui peuvent prendre dans l'ordre : 1, -1 ou 0. On
indique pour chacun (si nécessaire) le nom du module suivant à exécuter
dans chaque cas.</li><li><span style="font-weight: bold;">param1</span>
: on peut rajouter, si nécessaire, des paramètres complémentaires, qui
pourront être récupérés dans le code du module par l'appel à la
variable <span style="font-style: italic;">$t_module["param1"]</span>. Cette possibilité est utilisée pour consulter cette documentation...</li><li><span style="font-weight: bold;">ajax</span> : 0|1. Si le module est utilisé pour répondre à une requête AJAX, basculer ce paramètre à 1 : l'affichage par défaut (titre, menu...) sera inhibé.</li></ul><h3>La gestion du menu</h3>Le
menu est généré automatiquement à partir du fichier actions.xml.
Actuellement, le menu est généré sur deux niveaux, et vérifie que
l'utilisateur ait les droits suffisants demandés. Pour chaque module,
on peut définir les attributs suivants :<br><ul><li><span style="font-weight: bold;">menulevel</span> : 0 ou 1 : c'est le niveau du menu</li><li><span style="font-weight: bold;">menuorder</span>
: 0 à n. Ce numéro doit être unique pour le menu considéré, il sert
d'identifiant pour racrocher les sous-menus. Il définit également
l'ordre d'affichage.</li><li><span style="font-weight: bold;">menudroits</span> : indique le droit nécessaire pour pouvoir visualiser l'item considéré dans le menu</li><li><span style="font-weight: bold;">menuloginrequis</span>
: 0|1|2 : 0 : pas de login requis, 1, login requis, 2 : non affiché si
le login a été saisi (par exemple, pour le module "connexion").</li><li><span style="font-weight: bold;">menuparent</span>
: pour les menus de niveau 1 (sous-menu), indique à quel rubrique du
niveau 0 il faut rattacher l'item. Ce numéro correspond à la valeur
indiquée dans menuorder</li><li><span style="font-weight: bold;">menuvalue</span>
: clé du tableau d'internationalisation (par défaut, locales/fr_FR.php)
pour afficher le libellé du menu. Par exemple, voici la valeur pour
l'item 0 : $LANG["menu"][0] = "Gestion";</li><li><span style="font-weight: bold;">menutitle</span>
: clé du tableau d'internationalisation pour afficher le texte d'aide
pour le menu. Exemple : $LANG["menu"][1] = "Opérations de gestion";</li></ul><pre></pre></body></html>